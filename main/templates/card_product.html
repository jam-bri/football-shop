{# Single product card #}
<div class="group bg-white rounded-xl border border-slate-200 overflow-hidden hover:shadow-md transition">
  <!-- Image area -->
  <a href="{% url 'main:product_detail' product.pk %}" class="block bg-slate-100 aspect-[4/3]">
    {% if product.thumbnail %}
      <img src="{{ product.thumbnail }}" alt="{{ product.name }}"
           class="w-full h-full object-contain transition transform group-hover:scale-[1.02]">
    {% else %}
      <div class="w-full h-full flex items-center justify-center text-slate-400 text-sm">
        No image
      </div>
    {% endif %}
  </a>

  <!-- Content -->
  <div class="p-4">
    <!-- Price -->
    <div class="text-slate-900 font-extrabold text-lg">${{ product.price }}</div>

    <!-- Name -->
    <a href="{% url 'main:product_detail' product.pk %}"
       class="block mt-1 text-slate-900 font-semibold leading-snug hover:underline">
      {{ product.name }}
    </a>

    <!-- Category / meta -->
    <div class="mt-1 text-slate-500 text-sm">
      {{ product.category }}
    </div>

    <!-- Badges -->
    <div class="mt-2 flex flex-wrap items-center gap-2 text-xs">
      {% if product.is_featured %}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-yellow-100 text-yellow-800 border border-yellow-200">
          Featured
        </span>
      {% endif %}
      {% if product.stock|default:0 <= 5 %}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-red-50 text-red-700 border border-red-200">
          Low stock
        </span>
      {% else %}
        <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-slate-50 text-slate-700 border border-slate-200">
          In stock: {{ product.stock }}
        </span>
      {% endif %}
      <span class="inline-flex items-center px-2 py-0.5 rounded-full bg-slate-100 text-slate-700 border border-slate-200">
        â˜… {{ product.rating }}
      </span>
    </div>

    <!-- Actions -->
    <div class="mt-4 flex items-center gap-2">
      <a href="{% url 'main:product_detail' product.pk %}"
         class="inline-flex items-center px-3 py-2 rounded-md bg-slate-900 text-white hover:bg-slate-800 transition">
        View
      </a>

      {% if user.is_authenticated and product.user == user %}  <!-- Changed from owner_id -->
        <a href="{% url 'main:edit_product' product.pk %}" 
           class="inline-flex items-center px-3 py-2 rounded-md border border-slate-300">
          Edit
        </a>

        <form action="{% url 'main:delete_product' product.pk %}" method="post" class="inline">
            {% csrf_token %}
            <button type="submit" 
                    class="inline-flex items-center px-3 py-2 rounded-md border border-red-300 text-red-700">
              Delete
            </button>
        </form>
      {% endif %}
    </div>
  </div>
</div>
